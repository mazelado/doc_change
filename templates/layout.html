<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0; user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="msapplication-tap-highlight" content="no">

    <title>Document Change System</title>

    <!-- Favicons - generated by realfavicongenerator.net -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="mask-icon" href="{{ url_for('static', filename='safari-pinned-tab.svg') }}" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/materialize.min.css') }}"
          media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!-- TableSorter CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.materialize.css') }}">

    <!-- TableSorter Pager Plugin -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.tablesorter.pager.css') }}">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" type=text/css href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

<!-- Navbar -->
{% if current_user.is_authenticated -%}
    <!-- Dropdown Structure -->
    <ul id="dropdown1" class="dropdown-content">
        <li><a class="black-text" href="{{ url_for('show_dashboard') }}">Dashboard</a></li>
        <li class="divider"></li>
        <li><a class="black-text" href="{{ url_for('show_doc_change', doc_change_id=0) }}">New Document Change</a></li>
        <li><a class="black-text" href="{{ url_for('show_all_doc_changes') }}">View all Document Changes</a></li>
    </ul>
    <ul id="dropdown2" class="dropdown-content">
        <li><a href="{{ url_for('show_edit_user') }}">Edit Profile</a></li>
        {% if current_user.is_authenticated and current_user.has_role('admin') -%}
            <li class="divider"></li>
            <li><a class="black-text" href="{{ url_for('show_register_user') }}">Add a User</a></li>
            <li><a class="black-text" href="{{ url_for('show_edit_all_users') }}">Edit Users</a></li>
        {% endif -%}
        <li class="divider"></li>
        <li><a class="black-text" href="{{ url_for('do_logout') }}">Log Out</a></li>
    </ul>
{% endif -%}
<nav class="white" role="navigation">
    <div class="nav-wrapper container">
        <a id="logo-container" href="{{ url_for('show_start') }}" class="brand-logo">
            <img class="skyway-logo" src="{{ url_for('static', filename='images/logo.png') }}"
                 alt="Document Change System">
        </a>
        <ul class="right hide-on-med-and-down">
            {% if not current_user.is_authenticated -%}
                <li><a class="black-text" href="{{ url_for('show_login') }}">Log In</a></li>
            {% else -%}
                <li>
                    <a class="dropdown-button black-text" href="#" data-activates="dropdown1">
                        Document Change System<i class="material-icons right">arrow_drop_down</i>
                    </a>
                </li>
                <li>
                    <a class="dropdown-button black-text" href="#" data-activates="dropdown2">
                        {{ current_user.name }}<i class="material-icons right">arrow_drop_down</i>
                    </a>
                </li>
            {% endif -%}
        </ul>
    </div>
</nav>

<!-- Flash messages - Categories: success (green), info (blue), warning (yellow), danger (red) -->
{% with messages = get_flashed_messages(with_categories=true) -%}
    {% if messages -%}
        {% for category, message in messages -%}
            <div class="container">
                <div class="row">
                    <div id="card-alert" class="card {{ category }} lighten-5">
                        <div class="card-content {{ category }}-text">
                            <p>{{ message|safe }}</p>
                        </div>
                        {# TODO: Figure out how to make card close buttons work #}
{#                        <button type="button" class="close {{ color }}-text" data-dismiss="alert" aria-label="Close">#}
{#                            <span aria-hidden="true">&times;</span>#}
{#                        </button>#}
                    </div>
                </div>
            </div>
        {% endfor -%}
    {% endif -%}
{% endwith -%}
<!-- /Flash messages -->

{% block navbar -%}{% endblock -%}
<!-- /Navbar -->

<!-- Body -->
{% block body -%}{% endblock -%}
<!-- /Body -->

<!--Import jQuery before materialize.js-->
<script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.2.1.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/jquery.tablesorter.combined.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/materialize.min.js') }}"></script>
<script>
    $(document).ready(function () {
        $('.dropdown-button').dropdown();
    });
</script>
{% block js -%}
    <!-- Custom JavaScript -->
    <!-- /Custom JavaScript -->
{% endblock -%}
</body>
</html>